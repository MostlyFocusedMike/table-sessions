!function(){"use strict";var t={includedNum:[],usedNum:[],startRound:1,x:1,y:1,xEl:document.getElementById("x-id"),yEl:document.getElementById("y-id"),qNum:0,qRank:1,qOrder:[],pairs:{},correct:0,totalPoints:0,sessionMode:"sequence",endMsg:document.getElementById("end-msg"),cctMsg:document.getElementById("cct-msg"),wngMsg:document.getElementById("wng-msg"),wlcMsg:document.getElementById("welcome-msg"),roundBar:document.getElementById("round-mover"),sessionBar:document.getElementById("session-mover"),missedQs:document.getElementById("mis-qs"),setupRound:function(){var t,e=document.getElementsByName("start-round"),s=document.getElementsByName("include-num");for(this.includedNum.length=0,t=0;t<12;t++)e[t].checked&&(this.startRound=Number(e[t].value)),s[t].checked&&this.includedNum.push(Number(e[t].value));this.totalPoints=Math.pow(this.includedNum.length,2),this.showScore()},reset:function(){this.usedNum.length=0,this.correct=0,this.qNum=0,this.qRank=1,this.qOrder=[],this.pairs={},this.wlcMsg.style.display="block",this.cctMsg.style.display="none",this.wngMsg.style.display="none",this.endMsg.style.display="none",this.roundBar.style.left="0",this.sessionBar.style.left="0",this.missedQs.innerHTML=""},initialSetup:function(){this.reset(),this.setupRound(),this.setupField(),this.displayCurrentSettings(),"sequence"===this.sessionMode?(this.xEl.textContent=this.startRound,this.yEl.textContent=this.includedNum[0],this.x=this.startRound,this.y=this.includedNum[0]):(this.randomXY(),this.nextRandomQ())},checkAnswer:function(){var t=document.getElementById("u-ans"),e=Number(t.value),s=this.x*this.y;if("block"!==this.endMsg.style.display){if(Number.isNaN(e)||""===t.value)return window.alert("Only numbers in the answer form please"),void(t.value="");e===s?(this.correct+=1,this.cctMsg.style.display="block",this.wngMsg.style.display="none",this.wlcMsg.style.display="none"):(this.missedQs.innerHTML+="<p>"+this.x+" * "+this.y+" = "+this.x*this.y+", not "+e+"</p>",this.cctMsg.style.display="none",this.wngMsg.style.display="block",this.wlcMsg.style.display="none",document.getElementById("real-ans").textContent=s),this.qNum+=1,this.setupNextQ(),this.adjustBars(),this.showScore(),t.value=""}else t.value=""},setupNextQ:function(){"sequence"===this.sessionMode?(this.usedNum.push(this.y),this.usedNum.length<this.includedNum.length?this.randomY():this.nextRound()):this.qNum<this.totalPoints?this.nextRandomQ():this.end()},randomY:function(){for(;;)if(this.y=Math.floor(12*Math.random()+1),this.includedNum.includes(this.y)&&!1===this.usedNum.includes(this.y)){this.yEl.textContent=this.y;break}},nextRound:function(){for(this.x+=1;!this.includedNum.includes(this.x)&&13!==this.x;)this.x+=1;13!==this.x?(this.xEl.textContent=this.x,this.adjustScore(),this.adjustBars(),this.usedNum.length=0,this.randomY(),this.showScore(),this.adjustBars()):this.end()},adjustScore:function(){if("sequence"===this.sessionMode){if(this.usedNum.length!==this.includedNum.length&&"none"===this.endMsg.style.display){var t=this.includedNum.length-this.usedNum.length;this.totalPoints-=t}}else this.totalPoints=this.qNum},end:function(){this.showScore(),this.totalPoints=this.qNum,this.adjustBars(),document.getElementById("end-msg").style.display="block",document.getElementById("tot-q").textContent=this.correct+"/"+this.qNum,""===this.missedQs.innerHTML&&(this.totalPoints>9?this.missedQs.innerHTML="<p>You made no mistakes,<br />great job!</p>":this.totalPoints<=9&&this.totalPoints>0?this.missedQs.innerHTML="<p>You skipped a lot,<br />but made no mistakes.":this.missedQs.innerHTML="<p>You didn't actually<br />do the session..."),this.x=12},showScore:function(){var t,e,s=document.getElementsByClassName("fin-score"),n=this.correct/this.qNum*100;for(n=n.toFixed(0),isNaN(n)&&(n=0),t=100===n?"#29ACFD":n>=95?"#004EFF":n>=80?"#28A219":n>=60?"#EBB500":n>=40?"#A21919":"#333",e=0;e<s.length;e++)s[e].textContent=n+"%",s[e].style.color=t},adjustBars:function(){var t=this.qNum/this.totalPoints*100,e=this.usedNum.length/this.includedNum.length*100;this.sessionBar.style.left=t+"%",this.roundBar.style.left=e+"%"},randomXY:function(){var t,e,s=this.includedNum.length;for(t=0;t<s;t++)for(e=0;e<s;e++)this.pairs[this.qRank]=[this.includedNum[t],this.includedNum[e]],this.qOrder.push(this.qRank),this.qRank+=1;this.qOrder.sort(function(t,e){return.5-Math.random()})},nextRandomQ:function(){this.x=this.pairs[this.qOrder[this.qNum]][0],this.y=this.pairs[this.qOrder[this.qNum]][1],this.xEl.textContent=this.x,this.yEl.textContent=this.y},setMode:function(t){var e=event.target.id;this.sessionMode=e,document.getElementById("session-type").textContent="random"===e?"Randomly":"In Order"},setupField:function(){var t,e=document.getElementsByClassName("seq-el"),s=document.getElementById("end-button"),n=e.length;if("sequence"===this.sessionMode){for(t=0;t<n;t++)e[t].style.display="block";s.style.display="none",window.scrollBy(0,400)}else{for(t=0;t<n;t++)e[t].style.display="none";s.style.display="block"}},displayCurrentSettings:function(){document.getElementById("current-mode").textContent="sequence"===this.sessionMode?"In Order":"Randomly",document.getElementById("current-include").textContent=this.includedNum.join(", ")}};function e(){var t=[document.getElementById("create-box"),document.getElementById("cnf-holder")];t[1].style.display="block"===t[1].style.display?"none":"block",t[0].style.display="none"===t[0].style.display?"block":"none"}t.initialSetup();document.getElementById("start-button");var s=document.getElementById("skip-button"),n=document.getElementById("u-ans");document.getElementById("create-button").addEventListener("click",function(){e(),window.scrollBy(0,400)}),document.getElementById("close-button").addEventListener("click",function(){e()}),document.getElementById("start-button").addEventListener("click",function(){t.initialSetup(),n.value="",e()}),s.addEventListener("click",function(){t.nextRound(),n.focus()}),n.addEventListener("focus",function(){n.value=""}),n.addEventListener("keypress",function(e){13===(e.which||e.keyCode)&&t.checkAnswer()}),document.getElementById("end-button").addEventListener("click",function(){t.end()}),document.getElementById("hide-end").addEventListener("click",function(){document.getElementById("end-msg").style.display="none",t.initialSetup()}),document.getElementById("random").addEventListener("click",function(){t.setMode(),t.initialSetup()}),document.getElementById("sequence").addEventListener("click",function(){t.setMode(),t.initialSetup()})}();